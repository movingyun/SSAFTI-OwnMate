<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.ownmate.model.dao.videoDao">

	<!-- DB와 JAVA간 객체 이름이 다른 것 통일 -->
	<resultMap type="video" id="videoMap">
		<id column="video_id" property="videoId" />
		<result column="video_title" property="videoTitle" />
		<result column="video_part" property="videoPart" />
		<result column="video_channel" property="videoChannel" />
		<result column="video_url" property="videoUrl" />
		<result column="video_view_cnt" property="videoViewCnt" />
	</resultMap>

	<!-- 전체비디오 조회 -->
	<select id="selectVideoList" resultMap="videoMap" parameterType="String">
		SELECT *
		FROM video;
		WHERE video_title LIKE CONCAT('%', #{keyword}, '%')
		ORDER BY video_viewCnt
	</select>

	<!-- 비디오아이디로 비디오 정보 가져오기 -->
	<select id="selectVideoById" parameterType="String" resultMap="videoMap">
		SELECT * FROM video
		WHERE video_id = #{videoId}
	</select>

	<!-- 부위별 운동 가져오기 -->
	<select id="selectPart" parameterType="String"
		resultMap="videoMap">
		SELECT * FROM video
		WHERE video_part = #{videoPart}
	</select>

	<!-- 조회수 올리기 -->
	<update id="updateVideo" parameterType="video">
		UPDATE video
		SET
		video_view_cnt = #{videoViewCnt}
		WHERE video_id = #{videoId}
	</update>

</mapper>